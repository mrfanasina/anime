import{r as a,u as y,a as w,b as C,j as t,T as k,g as A,s as l,d as S}from"./index-CvMYsqrU.js";import{A as E}from"./AnimeCard-jTMx9Ybd.js";import"./no-image-dark-Do-Ykov5.js";const T=()=>{const[u,g]=a.useState([]),[r,m]=a.useState(!0),[o,h]=a.useState(null),c=y(),{mode:n}=w(e=>e.theme),[d,f]=a.useState(null),p=n==="dark"?"#fff":"#000",x=n==="dark"?"#1a1a1a":"#f9f9f9";a.useEffect(()=>{C.get("/anime/all").then(s=>g(s.data)).catch(()=>h("Impossible de charger les animés")).finally(()=>m(!1));async function e(){try{const s=await A();f(s)}catch(s){console.error("Impossible de récupérer l'utilisateur:",s)}}e()},[]);const j=()=>t.jsx("div",{className:"relative overflow-hidden rounded-lg bg-gray-300 dark:bg-gray-700 animate-pulse",style:{aspectRatio:"225 / 338"},children:t.jsx("div",{className:"absolute bottom-0 left-0 w-full h-12 bg-gray-400/60 dark:bg-gray-600/60"})}),b=e=>{if(!d){l("Vous devez être connecté pour ajouter à la watch-list","error");return}const s={anime_id:e.id,status:"watching"};S(d.id,s).then(()=>{l(e.name+" ajouté à la watch-list","success")}).catch(i=>{console.error(i),l(i.message||"Erreur lors de l'ajout à la watch-list","error")})},v=e=>{c(`/details/${e.id}`)};return t.jsxs("div",{style:{backgroundColor:x,minHeight:"100vh",color:p},children:[t.jsx(k,{}),t.jsxs("div",{className:"pt-28 p-4 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:[r&&Array.from({length:10}).map((e,s)=>t.jsx(j,{},s)),!r&&o&&t.jsx("div",{className:"col-span-full text-center text-red-500 mt-10",children:o}),!r&&!o&&u.map(e=>t.jsx(E,{anime:e,onClick:()=>c(`/details/${e.id}`),onRead:()=>v(e),onAddWatch:b},e.id))]})]})};export{T as default};
