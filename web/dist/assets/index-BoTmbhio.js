import{a as w,r as a,b as x,j as s,T as S}from"./index-CvMYsqrU.js";function E(){const{mode:o,primaryColors:r,secondaryColors:i}=w(e=>e.theme),d=o==="dark"?"#fff":"#000",[c,b]=a.useState([]),[t,j]=a.useState([null,null]),[h,m]=a.useState(null),[g,y]=a.useState([]),[n,u]=a.useState(null);a.useEffect(()=>{x.get("/anime/all").then(e=>b(e.data)),p()},[]);const p=()=>{x.get("/anime/all").then(e=>{const l=[...e.data].sort((v,C)=>C.elo-v.elo);y(l.slice(0,10))})},f=()=>{if(c.length<2)return;const e=[...c].sort(()=>Math.random()-.5);j([e[0],e[1]]),m(null),u(null)},N=async e=>{u(e);const l=t[e];await x.post("stats/duel",{anime1_id:t[0].id,anime2_id:t[1].id,winner_id:l.id}),m(`Tu as voté pour "${l.name}" !`),p(),setTimeout(f,1200)},k=()=>{m("Duel ignoré."),u(null),setTimeout(f,800)};return a.useEffect(()=>{c.length>=2&&f()},[c]),s.jsxs("div",{style:{backgroundColor:o==="dark"?"#111":"#f9f9f9",color:d,minHeight:"100vh"},children:[s.jsx(S,{}),s.jsxs("div",{className:"flex flex-col pt-20 md:flex-row p-8 gap-8",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Duel d'animés"}),t[0]&&t[1]?s.jsx("div",{className:"flex gap-8",children:[0,1].map(e=>{const l=n===e;return s.jsxs("div",{className:"flex flex-col items-center rounded shadow p-6 min-w-[220px] transition-all duration-500",style:{background:l?`linear-gradient(135deg, ${i.main}, ${r.main})`:o==="dark"?"#222":"#fff",color:d,transform:n===null?"scale(1)":l?"scale(1.05)":"scale(1)",opacity:n!==null&&!l?.6:1,boxShadow:l?`0 0 24px ${r.main}55`:void 0,cursor:n===null?"pointer":"default"},children:[s.jsx("h3",{className:"text-xl font-semibold mb-2",children:t[e].name}),s.jsxs("div",{className:"text-sm mb-4",style:{color:o==="dark"?"#ccc":"#555"},children:["Elo: ",t[e].elo]}),s.jsx("button",{className:"mt-auto px-6 py-2 rounded transition-all duration-300",style:{backgroundColor:n===null?r.main:l?i.main:"#999",color:"#fff",cursor:n!==null&&!l?"not-allowed":"pointer"},disabled:n!==null,onClick:()=>N(e),children:"Voter pour"})]},t[e].id)})}):s.jsx("div",{children:"Chargement..."}),h&&s.jsx("div",{className:"mt-6 font-bold animate-bounce",style:{color:r.main},children:h}),t[0]&&t[1]&&n===null&&s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx("button",{className:"px-6 py-2 rounded transition",style:{backgroundColor:i.main,color:"#fff"},onClick:k,children:"Passer"})})]}),s.jsxs("div",{className:"flex-1 border-t md:border-t-0 md:border-l",style:{borderColor:o==="dark"?"#444":"#ccc",paddingTop:"2rem",paddingLeft:"2rem"},children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"Classement Elo"}),s.jsx("ol",{className:"space-y-2",children:g.map(e=>s.jsxs("li",{className:"flex justify-between items-center rounded px-4 py-2",style:{backgroundColor:o==="dark"?"#222":"#f0f0f0",color:d},children:[s.jsx("span",{className:"font-semibold",children:e.name}),s.jsx("span",{children:e.elo})]},e.id))})]})]})]})}export{E as default};
